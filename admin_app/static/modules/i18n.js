// i18n Translations Module

export let currentLanguage = localStorage.getItem('admin_language') || 'ru';

export const translations = {
    ru: {
        // Header & Navigation
        'app.title': 'LinguaBot Admin',
        'nav.dashboard': 'Dashboard',
        'nav.users': '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
        'nav.logs': '–õ–æ–≥–∏',
        'nav.feedback': 'Feedback',
        'nav.adminLogs': 'Admin Logs',

        // Dashboard
        'dashboard.title': '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞',
        'dashboard.total_users': '–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
        'dashboard.premium_users': 'Premium –ø–æ–¥–ø–∏—Å—á–∏–∫–∏',
        'dashboard.today_active': '–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–≥–æ–¥–Ω—è',
        'dashboard.translations_today': '–ü–µ—Ä–µ–≤–æ–¥–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è',
        'dashboard.daily_stats': '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º',
        'dashboard.language_stats': '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —è–∑—ã–∫–∞–º',
        'dashboard.source_languages': '–ò—Å—Ö–æ–¥–Ω—ã–µ —è–∑—ã–∫–∏',
        'dashboard.target_languages': '–¶–µ–ª–µ–≤—ã–µ —è–∑—ã–∫–∏',
        'dashboard.performance': '–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å',
        'dashboard.avg_processing': '–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏',
        'dashboard.success_rate': '–£—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤',
        'dashboard.errors_7days': '–û—à–∏–±–∫–∏ –∑–∞ 7 –¥–Ω–µ–π',

        // Users
        'users.title': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏',
        'users.search': '–ü–æ–∏—Å–∫ –ø–æ username...',
        'users.filter_premium': '–¢–æ–ª—å–∫–æ Premium',
        'users.refresh': '–û–±–Ω–æ–≤–∏—Ç—å',
        'users.translations': '–ü–µ—Ä–µ–≤–æ–¥–æ–≤',
        'users.joined': '–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è',
        'users.view': '–ü—Ä–æ—Å–º–æ—Ç—Ä',
        'users.grant_premium': '–í—ã–¥–∞—Ç—å Premium',
        'users.send_message': '–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ',
        'users.block': '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å',
        'users.unblock': '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å',
        'users.premium_badge': 'PREMIUM',
        'users.blocked_badge': '–ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù',

        // User History Modal
        'history.title': '–ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
        'history.close': '–ó–∞–∫—Ä—ã—Ç—å',
        'history.voice': '–ì–æ–ª–æ—Å–æ–≤–æ–π',
        'history.text': '–¢–µ–∫—Å—Ç',
        'history.from': '–∏–∑',
        'history.to': '–≤',
        'history.no_translations': '–ù–µ—Ç –ø–µ—Ä–µ–≤–æ–¥–æ–≤',

        // Logs
        'logs.title': '–õ–æ–≥–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤',
        'logs.filter_all': '–í—Å–µ –ª–æ–≥–∏',
        'logs.filter_voice': '–¢–æ–ª—å–∫–æ –≥–æ–ª–æ—Å–æ–≤—ã–µ',
        'logs.filter_text': '–¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç',
        'logs.search': '–ü–æ–∏—Å–∫ –ø–æ username –∏–ª–∏ —Ç–µ–∫—Å—Ç—É...',
        'logs.refresh': '–û–±–Ω–æ–≤–∏—Ç—å',
        'logs.user': '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
        'logs.type': '–¢–∏–ø',
        'logs.translation': '–ü–µ—Ä–µ–≤–æ–¥',
        'logs.date': '–î–∞—Ç–∞',
        'logs.voice': 'üé§ –ì–æ–ª–æ—Å',
        'logs.text': 'üí¨ –¢–µ–∫—Å—Ç',

        // Feedback
        'feedback.title': '–û—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
        'feedback.filter_all': '–í—Å–µ –æ—Ç–∑—ã–≤—ã',
        'feedback.filter_new': '–¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ',
        'feedback.filter_reviewed': '–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ',
        'feedback.filter_resolved': '–†–µ—à—ë–Ω–Ω—ã–µ',
        'feedback.refresh': '–û–±–Ω–æ–≤–∏—Ç—å',
        'feedback.mark_reviewed': '–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ',
        'feedback.mark_resolved': '–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ —Ä–µ—à–µ–Ω–æ',
        'feedback.status_new': '–ù–û–í–´–ô',
        'feedback.status_reviewed': '–ü–†–û–°–ú–û–¢–†–ï–ù',
        'feedback.status_resolved': '–†–ï–®–Å–ù',
        'feedback.from': '–û—Ç',

        // Admin Logs
        'adminLogs.title': '–õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤',
        'adminLogs.filter_all_admins': '–í—Å–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã',
        'adminLogs.filter_all_actions': '–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è',
        'adminLogs.refresh': '–û–±–Ω–æ–≤–∏—Ç—å',

        // Roles
        'nav.roles': '–†–æ–ª–∏',
        'roles.title': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤',
        'roles.refresh': '–û–±–Ω–æ–≤–∏—Ç—å',
        'roles.add_admin': '–î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∞',
        'roles.modal_title': '–ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞',
        'roles.user_id_label': 'ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:',
        'roles.role_label': '–†–æ–ª—å:',
        'roles.role_admin': '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)',
        'roles.role_moderator': '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ª–æ–≥–∏)',
        'roles.role_analyst': '–ê–Ω–∞–ª–∏—Ç–∏–∫ (–¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä)',
        'roles.assign_btn': '–ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å',
        'roles.change_role': '–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å',
        'roles.remove_role': '–£–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å',
        'roles.current_role': '–¢–µ–∫—É—â–∞—è —Ä–æ–ª—å',
        'roles.role_badge_admin': '–ê–î–ú–ò–ù',
        'roles.role_badge_moderator': '–ú–û–î–ï–†–ê–¢–û–†',
        'roles.role_badge_analyst': '–ê–ù–ê–õ–ò–¢–ò–ö',
        'roles.assigned_date': '–ù–∞–∑–Ω–∞—á–µ–Ω–∞',
        'roles.updated_date': '–û–±–Ω–æ–≤–ª–µ–Ω–∞',
        'roles.confirm_remove': '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —É —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?',
        'roles.success_assigned': '–†–æ–ª—å —É—Å–ø–µ—à–Ω–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞!',
        'roles.success_removed': '–†–æ–ª—å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞!',
        'roles.error_assign': '–û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ —Ä–æ–ª–∏',
        'roles.error_remove': '–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ä–æ–ª–∏',

        // Settings
        'nav.settings': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
        'settings.title': '–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
        'settings.category.all': '–í—Å–µ',
        'settings.category.api_keys': 'üîë API –ö–ª—é—á–∏',
        'settings.category.translation': '–ü–µ—Ä–µ–≤–æ–¥—ã',
        'settings.category.voice': '–ì–æ–ª–æ—Å',
        'settings.category.pricing': '–¶–µ–Ω—ã',
        'settings.category.limits': '–õ–∏–º–∏—Ç—ã',
        'settings.category.features': '–§—É–Ω–∫—Ü–∏–∏',
        'settings.save': '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è',
        'settings.saved': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ',
        'settings.reset': '–°–±—Ä–æ—Å–∏—Ç—å –∫ –¥–µ—Ñ–æ–ª—Ç—É',
        'settings.no_changes': '–ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è',
        'settings.error': '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫',

        // Balances
        'balances.title': 'üí∞ –ë–∞–ª–∞–Ω—Å—ã API',
        'balances.refresh': '–û–±–Ω–æ–≤–∏—Ç—å',
        'balances.plan': '–ü–ª–∞–Ω',
        'balances.tier': '–¢–∞—Ä–∏—Ñ',
        'balances.used': '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ',
        'balances.remaining': '–û—Å—Ç–∞–ª–æ—Å—å',
        'balances.limit': '–õ–∏–º–∏—Ç',
        'balances.view_balance': '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –±–∞–ª–∞–Ω—Å',
        'balances.view_details': '–ü–æ–¥—Ä–æ–±–Ω–µ–µ',
        'balances.view_console': '–û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å',

        // Pagination
        'pagination.prev': '–ù–∞–∑–∞–¥',
        'pagination.next': '–í–ø–µ—Ä—ë–¥',
        'pagination.page': '–°—Ç—Ä–∞–Ω–∏—Ü–∞',
        'pagination.of': '–∏–∑',

        // Performance
        'perf.voice': '–ì–æ–ª–æ—Å',
        'perf.text': '–¢–µ–∫—Å—Ç',
        'perf.translations': '–ø–µ—Ä–µ–≤–æ–¥–æ–≤',
        'perf.errors': '–æ—à–∏–±–æ–∫',
        'perf.no_errors': '–ù–µ—Ç –æ—à–∏–±–æ–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π üéâ',

        // Send Message Modal
        'message.modal_title': '–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é',
        'message.recipient': '–ü–æ–ª—É—á–∞—Ç–µ–ª—å:',
        'message.text_label': '–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:',
        'message.placeholder': '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...',
        'message.send_btn': '–û—Ç–ø—Ä–∞–≤–∏—Ç—å',
        'message.sent_success': '–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!',
        'message.sent_error': '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è',

        // Common
        'common.loading': '–ó–∞–≥—Ä—É–∑–∫–∞...',
        'common.error': '–û—à–∏–±–∫–∞',
        'common.cancel': '–û—Ç–º–µ–Ω–∞',
        'common.success': '–£—Å–ø–µ—à–Ω–æ',
        'common.no_data': '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö',
        'common.unknown': '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
    },
    en: {
        // Header & Navigation
        'app.title': 'LinguaBot Admin',
        'nav.dashboard': 'Dashboard',
        'nav.users': 'Users',
        'nav.logs': 'Logs',
        'nav.feedback': 'Feedback',
        'nav.adminLogs': 'Admin Logs',

        // Dashboard
        'dashboard.title': 'Bot Statistics',
        'dashboard.total_users': 'Total Users',
        'dashboard.premium_users': 'Premium Subscribers',
        'dashboard.today_active': 'Active Today',
        'dashboard.translations_today': 'Translations Today',
        'dashboard.daily_stats': 'Daily Statistics',
        'dashboard.language_stats': 'Language Statistics',
        'dashboard.source_languages': 'Source Languages',
        'dashboard.target_languages': 'Target Languages',
        'dashboard.performance': 'Performance',
        'dashboard.avg_processing': 'Average Processing Time',
        'dashboard.success_rate': 'Success Rate',
        'dashboard.errors_7days': 'Errors (7 days)',

        // Users
        'users.title': 'User Management',
        'users.search': 'Search by username...',
        'users.filter_premium': 'Premium Only',
        'users.refresh': 'Refresh',
        'users.translations': 'Translations',
        'users.joined': 'Joined',
        'users.view': 'View',
        'users.grant_premium': 'Grant Premium',
        'users.send_message': 'Send Message',
        'users.block': 'Block',
        'users.unblock': 'Unblock',
        'users.premium_badge': 'PREMIUM',
        'users.blocked_badge': 'BLOCKED',

        // User History Modal
        'history.title': 'User Translation History',
        'history.close': 'Close',
        'history.voice': 'Voice',
        'history.text': 'Text',
        'history.from': 'from',
        'history.to': 'to',
        'history.no_translations': 'No translations',

        // Logs
        'logs.title': 'Translation Logs',
        'logs.filter_all': 'All logs',
        'logs.filter_voice': 'Voice only',
        'logs.filter_text': 'Text only',
        'logs.search': 'Search by username or text...',
        'logs.refresh': 'Refresh',
        'logs.user': 'User',
        'logs.type': 'Type',
        'logs.translation': 'Translation',
        'logs.date': 'Date',
        'logs.voice': 'üé§ Voice',
        'logs.text': 'üí¨ Text',

        // Feedback
        'feedback.title': 'User Feedback',
        'feedback.filter_all': 'All feedback',
        'feedback.filter_new': 'New only',
        'feedback.filter_reviewed': 'Reviewed',
        'feedback.filter_resolved': 'Resolved',
        'feedback.refresh': 'Refresh',
        'feedback.mark_reviewed': 'Mark as Reviewed',
        'feedback.mark_resolved': 'Mark as Resolved',
        'feedback.status_new': 'NEW',
        'feedback.status_reviewed': 'REVIEWED',
        'feedback.status_resolved': 'RESOLVED',
        'feedback.from': 'From',

        // Admin Logs
        'adminLogs.title': 'Admin Action Logs',
        'adminLogs.filter_all_admins': 'All admins',
        'adminLogs.filter_all_actions': 'All actions',
        'adminLogs.refresh': 'Refresh',

        // Roles
        'nav.roles': 'Roles',
        'roles.title': 'Admin Role Management',
        'roles.refresh': 'Refresh',
        'roles.add_admin': 'Add Admin',
        'roles.modal_title': 'Assign Admin Role',
        'roles.user_id_label': 'User ID:',
        'roles.role_label': 'Role:',
        'roles.role_admin': 'Admin (Full Access)',
        'roles.role_moderator': 'Moderator (Users & Logs)',
        'roles.role_analyst': 'Analyst (View Only)',
        'roles.assign_btn': 'Assign Role',
        'roles.change_role': 'Change Role',
        'roles.remove_role': 'Remove Role',
        'roles.current_role': 'Current Role',
        'roles.role_badge_admin': 'ADMIN',
        'roles.role_badge_moderator': 'MODERATOR',
        'roles.role_badge_analyst': 'ANALYST',
        'roles.assigned_date': 'Assigned',
        'roles.updated_date': 'Updated',
        'roles.confirm_remove': 'Are you sure you want to remove admin role from this user?',
        'roles.success_assigned': 'Role successfully assigned!',
        'roles.success_removed': 'Role successfully removed!',
        'roles.error_assign': 'Error assigning role',
        'roles.error_remove': 'Error removing role',

        // Settings
        'nav.settings': 'Settings',
        'settings.title': 'System Settings',
        'settings.category.all': 'All',
        'settings.category.api_keys': 'üîë API Keys',
        'settings.category.translation': 'Translation',
        'settings.category.voice': 'Voice',
        'settings.category.pricing': 'Pricing',
        'settings.category.limits': 'Limits',
        'settings.category.features': 'Features',
        'settings.save': 'Save Changes',
        'settings.saved': 'Settings saved successfully',
        'settings.reset': 'Reset to default',
        'settings.no_changes': 'No changes to save',
        'settings.error': 'Error saving settings',

        // Balances
        'balances.title': 'üí∞ API Balances',
        'balances.refresh': 'Refresh',
        'balances.plan': 'Plan',
        'balances.tier': 'Tier',
        'balances.used': 'Used',
        'balances.remaining': 'Remaining',
        'balances.limit': 'Limit',
        'balances.view_balance': 'View Balance',
        'balances.view_details': 'View Details',
        'balances.view_console': 'Open Console',

        // Pagination
        'pagination.prev': 'Previous',
        'pagination.next': 'Next',
        'pagination.page': 'Page',
        'pagination.of': 'of',

        // Performance
        'perf.voice': 'Voice',
        'perf.text': 'Text',
        'perf.translations': 'translations',
        'perf.errors': 'errors',
        'perf.no_errors': 'No errors in the last 7 days üéâ',

        // Send Message Modal
        'message.modal_title': 'Send Message to User',
        'message.recipient': 'Recipient:',
        'message.text_label': 'Message text:',
        'message.placeholder': 'Enter your message...',
        'message.send_btn': 'Send',
        'message.sent_success': 'Message sent!',
        'message.sent_error': 'Error sending message',

        // Common
        'common.loading': 'Loading...',
        'common.error': 'Error',
        'common.cancel': 'Cancel',
        'common.success': 'Success',
        'common.no_data': 'No data',
        'common.unknown': 'Unknown'
    }
};

// Translation function
export function t(key) {
    return translations[currentLanguage][key] || key;
}

// Apply translations to all elements with data-i18n attribute
export function applyTranslations() {
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = t(key);

        // Handle different element types
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            element.placeholder = translation;
        } else if (element.classList.contains('tab-text')) {
            // For tab text spans, update textContent directly
            element.textContent = translation;
        } else if (element.classList.contains('tab-btn')) {
            // For tab buttons, update only the .tab-text span inside
            const textSpan = element.querySelector('.tab-text');
            if (textSpan) {
                textSpan.textContent = translation;
            }
        } else {
            element.textContent = translation;
        }
    });

    // Update page title
    document.title = t('app.title');
}

// Switch language
export function switchLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('admin_language', lang);
    applyTranslations();

    // Update active state on language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
    });

    // Refresh current tab content to update dynamic translations
    const activeTab = document.querySelector('.tab-btn.active')?.dataset.tab;
    if (activeTab === 'dashboard') {
        // Will be imported from dashboard module
        window.loadDashboard?.();
    } else if (activeTab === 'users') {
        window.loadUsers?.(window.currentPage || 1);
    } else if (activeTab === 'feedback') {
        window.loadFeedback?.();
    }
}
